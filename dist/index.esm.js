function e(e){try{var t=e.match(/^[A-Z]+(?=\()/)[0],r=void 0;if("POINT"===t)r={type:"Point",coordinates:(o=e.match(/(-*\d+\.*\d*\s-*\d+\.*\d*)/g))[0].split(" ").map(Number)};else if("LINESTRING"===t){var o=e.match(/(-*\d+\.*\d*\s-*\d+\.*\d*)/g),n=[];null==o||o.forEach((function(e){n.push(e.split(" ").map(Number))})),r={type:"LineString",coordinates:n}}else if("MULTIPOINT"===t){o=e.match(/(-*\d+\.*\d*\s-*\d+\.*\d*)/g);var a=[];null==o||o.forEach((function(e){a.push(e.split(" ").map(Number))})),r={type:"MultiPoint",coordinates:a}}else if("POLYGON"===t){var c=e.split(/,(?=\()/),i=[];c.forEach((function(e){var t=e.match(/(-*\d+\.*\d*\s-*\d+\.*\d*)/g),r=[];null==t||t.forEach((function(e){r.push(e.split(" ").map(Number))})),i.push(r)})),r={type:"Polygon",coordinates:i}}else if("MULTILINESTRING"===t){c=e.split(/,(?=\()/);var s=[];c.forEach((function(e){var t=e.match(/(-*\d+\.*\d*\s-*\d+\.*\d*)/g),r=[];null==t||t.forEach((function(e){r.push(e.split(" ").map(Number))})),s.push(r)})),r={type:"MultiLineString",coordinates:s}}else if("MULTIPOLYGON"===t){var l=e.split(/,(?=\(\()/),u=[];l.forEach((function(e){var t=e.split(/,(?=\()/);console.log(t);var r=[];t.forEach((function(e){var t=e.match(/(-*\d+\.*\d*\s-*\d+\.*\d*)/g),o=[];null==t||t.forEach((function(e){o.push(e.split(" ").map(Number))})),r.push(o)})),u.push(r)})),r={type:"MultiPolygon",coordinates:u}}return r}catch(e){console.log("格式解析出错",e)}}function t(t){try{var r=(t=t.replaceAll("\n","").replaceAll("  ","").replaceAll(" ,",",").replaceAll(", ",",").replaceAll(" (","(").replaceAll("( ","(").replaceAll(" )",")").replaceAll(") ",")").toUpperCase()).match(/^[A-Z]+(?=\()/)[0];if("GEOMETRYCOLLECTION"===r){for(var o=(t=t.substring(19,t.length-1)).split(/,(?=[A-Z]+)/),n=[],a=0;a<o.length;a++){if(!(c=e(o[a])))return;n.push({type:"Feature",geometry:c})}return{type:"FeatureCollection",features:n}}if((o=t.split(/,(?=[A-Z]+)/)).length>1){for(n=[],a=0;a<o.length;a++){var c;if(!(c=e(o[a])))return;n.push({type:"Feature",geometry:c})}return{type:"FeatureCollection",features:n}}if(["POINT","LINESTRING","POLYGON","MULTIPOINT","MULTILINESTRING","MULTIPOLYGON"].includes(r))return{type:"Feature",geometry:e(t)}}catch(e){console.log("格式解析出错",e)}}function r(e){var t=e.type,r=e.coordinates,o=[];switch(t.toUpperCase()){case"POINT":o.push(r.slice(0,2).join(" "));break;case"LINESTRING":case"MULTIPOINT":r.forEach((function(e){e instanceof Array&&o.push(e.slice(0,2).join(" "))}));break;case"POLYGON":case"MULTILINESTRING":r.forEach((function(e){var t=[];e instanceof Array&&e.forEach((function(e){e instanceof Array&&t.push(e.slice(0,2).join(" "))})),o.push("(".concat(t.join(","),")"))}));break;case"MULTIPOLYGON":r.forEach((function(e){var t=[];e instanceof Array&&e.forEach((function(e){var r=[];e instanceof Array&&e.forEach((function(e){e instanceof Array&&r.push(e.slice(0,2).join(" "))})),t.push("(".concat(r.join(","),")"))})),o.push("(".concat(t.join(","),")"))}))}return"".concat(t.toUpperCase(),"(").concat(o.join(","),")")}function o(e){var t,o;if(e){if(["POINT","LINESTRING","POLYGON","MULTIPOINT","MULTILINESTRING","MULTIPOLYGON"].includes(e.type.toUpperCase()))return r(e);if("FEATURE"===e.type.toUpperCase())return r(e.geometry);if("GEOMETRYCOLLECTION"===e.type.toUpperCase()){var n=[];return null===(t=e.geometries)||void 0===t||t.forEach((function(e){n.push(r(e))})),"GEOMETRYCOLLECTION(".concat(n.join(","),")")}if("FEATURECOLLECTION"===e.type.toUpperCase()){var a=[];return null===(o=e.features)||void 0===o||o.forEach((function(e){a.push(r(e.geometry))})),"GEOMETRYCOLLECTION(".concat(a.join(","),")")}console.log("geojson没有type")}else console.log("没有数据")}export{o as geojsonToWkt,t as wktToGeojson};
